<Page x:Class="ProjetFinale.WPF.SettingsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Settings"
      Background="#303030">

    <Page.Resources>
        <!-- Styles pour la page Settings -->
        <Style x:Key="SettingCardStyle" TargetType="Border">
            <Setter Property="Background" Value="#2A2A2A"/>
            <Setter Property="CornerRadius" Value="12"/>
            <Setter Property="Padding" Value="25"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" BlurRadius="8" ShadowDepth="3" Opacity="0.3"/>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SectionTitleStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#D393FF"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="0,0,0,20"/>
        </Style>

        <Style x:Key="SettingLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <Style x:Key="SettingDescriptionStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="#B8B8B8"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Margin" Value="0,5,0,0"/>
        </Style>

        <Style x:Key="CustomComboBoxStyle" TargetType="ComboBox">
            <Setter Property="Background" Value="#3A3A3A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#AF66FF"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="12,8"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="MinWidth" Value="120"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <ContentPresenter Grid.Column="0"
                                                ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                Content="{TemplateBinding SelectionBoxItem}"
                                                ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}"
                                                HorizontalAlignment="Left"
                                                VerticalAlignment="Center"
                                                Margin="{TemplateBinding Padding}"/>

                                <TextBlock Grid.Column="1"
                                          Text="▼"
                                          Foreground="#D393FF"
                                          FontSize="12"
                                          VerticalAlignment="Center"
                                          Margin="0,0,12,0"/>

                                <Popup x:Name="PART_Popup"
                                      IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}"
                                      Placement="Bottom"
                                      PopupAnimation="Slide">
                                    <Border Background="#3A3A3A"
                                            BorderBrush="#AF66FF"
                                            BorderThickness="2"
                                            CornerRadius="8"
                                            MinWidth="{TemplateBinding ActualWidth}">
                                        <ScrollViewer>
                                            <ItemsPresenter/>
                                        </ScrollViewer>
                                    </Border>
                                </Popup>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="BorderBrush" Value="#D393FF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="CustomToggleStyle" TargetType="CheckBox">
            <Setter Property="Width" Value="60"/>
            <Setter Property="Height" Value="30"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Border x:Name="Border"
                                Background="#4A4A4A"
                                CornerRadius="15"
                                Width="60"
                                Height="30">
                            <Border x:Name="Thumb"
                                    Background="White"
                                    CornerRadius="12"
                                    Width="24"
                                    Height="24"
                                    HorizontalAlignment="Left"
                                    Margin="3,3,0,3">
                                <Border.RenderTransform>
                                    <TranslateTransform x:Name="ThumbTransform"/>
                                </Border.RenderTransform>
                            </Border>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#AF66FF"/>
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="ThumbTransform"
                                                           Storyboard.TargetProperty="X"
                                                           To="30"
                                                           Duration="0:0:0.2"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="ThumbTransform"
                                                           Storyboard.TargetProperty="X"
                                                           To="0"
                                                           Duration="0:0:0.2"/>
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="DangerButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#DC2626"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="45"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="8">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#B91C1C"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#991B1B"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Page.Resources>

    <ScrollViewer Margin="20" VerticalScrollBarVisibility="Auto">
        <StackPanel MaxWidth="800">

            <!-- Titre principal -->
            <TextBlock Text="SETTINGS"
                       Foreground="White"
                       FontSize="32"
                       FontWeight="Bold"
                       Margin="0,0,0,30"/>

            <!-- Section Unités -->
            <Border Style="{StaticResource SettingCardStyle}">
                <StackPanel>
                    <TextBlock Text="UNITÉS DE MESURE" Style="{StaticResource SectionTitleStyle}"/>

                    <!-- Format Poids -->
                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="FORMAT POIDS" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Choisissez l'unité d'affichage du poids" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <ComboBox Grid.Column="1" 
                                 x:Name="FormatPoidsComboBox"
                                 Style="{StaticResource CustomComboBoxStyle}"
                                 SelectedIndex="0">
                            <ComboBoxItem Content="KG" Foreground="White"/>
                            <ComboBoxItem Content="LBS" Foreground="White"/>
                        </ComboBox>
                    </Grid>

                    <!-- Format Heure -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="FORMAT HEURE" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Format d'affichage de l'heure (24h ou 12h)" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <ComboBox Grid.Column="1" 
                                 x:Name="FormatHeureComboBox"
                                 Style="{StaticResource CustomComboBoxStyle}"
                                 SelectedIndex="0">
                            <ComboBoxItem Content="24H" Foreground="White"/>
                            <ComboBoxItem Content="12H" Foreground="White"/>
                        </ComboBox>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Section Apparence -->
            <Border Style="{StaticResource SettingCardStyle}">
                <StackPanel>
                    <TextBlock Text="APPARENCE" Style="{StaticResource SectionTitleStyle}"/>

                    <!-- Mode sombre -->
                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="MODE SOMBRE" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Activer le thème sombre (recommandé)" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <CheckBox Grid.Column="1" 
                                 x:Name="DarkModeToggle"
                                 Style="{StaticResource CustomToggleStyle}"
                                 IsChecked="True"/>
                    </Grid>

                    <!-- Thème couleur -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="THÈME COULEUR" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Couleur principale de l'interface" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <ComboBox Grid.Column="1" 
                                 x:Name="ThemeColorComboBox"
                                 Style="{StaticResource CustomComboBoxStyle}"
                                 SelectedIndex="0">
                            <ComboBoxItem Content="Violet" Foreground="White"/>
                            <ComboBoxItem Content="Bleu" Foreground="White"/>
                            <ComboBoxItem Content="Rose" Foreground="White"/>
                            <ComboBoxItem Content="Vert" Foreground="White"/>
                        </ComboBox>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Section Notifications -->
            <Border Style="{StaticResource SettingCardStyle}">
                <StackPanel>
                    <TextBlock Text="NOTIFICATIONS" Style="{StaticResource SectionTitleStyle}"/>

                    <!-- Rappels d'entraînement -->
                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="RAPPELS D'ENTRAÎNEMENT" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Recevoir des notifications pour les séances programmées" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <CheckBox Grid.Column="1" 
                                 x:Name="WorkoutRemindersToggle"
                                 Style="{StaticResource CustomToggleStyle}"
                                 IsChecked="True"/>
                    </Grid>

                    <!-- Rappels objectifs -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="RAPPELS OBJECTIFS" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Notifications de progression vers vos objectifs" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <CheckBox Grid.Column="1" 
                                 x:Name="GoalRemindersToggle"
                                 Style="{StaticResource CustomToggleStyle}"
                                 IsChecked="False"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Section Données -->
            <Border Style="{StaticResource SettingCardStyle}">
                <StackPanel>
                    <TextBlock Text="GESTION DES DONNÉES" Style="{StaticResource SectionTitleStyle}"/>

                    <!-- Sauvegarde automatique -->
                    <Grid Margin="0,0,0,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="SAUVEGARDE AUTOMATIQUE" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Sauvegarder automatiquement vos données" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <CheckBox Grid.Column="1" 
                                 x:Name="AutoSaveToggle"
                                 Style="{StaticResource CustomToggleStyle}"
                                 IsChecked="True"/>
                    </Grid>

                    <!-- Fréquence de sauvegarde -->
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="FRÉQUENCE DE SAUVEGARDE" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Intervalle de sauvegarde automatique" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <ComboBox Grid.Column="1" 
                                 x:Name="SaveFrequencyComboBox"
                                 Style="{StaticResource CustomComboBoxStyle}"
                                 SelectedIndex="1">
                            <ComboBoxItem Content="1 min" Foreground="White"/>
                            <ComboBoxItem Content="5 min" Foreground="White"/>
                            <ComboBoxItem Content="15 min" Foreground="White"/>
                            <ComboBoxItem Content="30 min" Foreground="White"/>
                        </ComboBox>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Section Compte -->
            <Border Style="{StaticResource SettingCardStyle}">
                <StackPanel>
                    <TextBlock Text="COMPTE UTILISATEUR" Style="{StaticResource SectionTitleStyle}"/>

                    <!-- Informations utilisateur -->
                    <Grid Margin="0,0,0,25">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="MODIFIER PROFIL" Style="{StaticResource SettingLabelStyle}"/>
                            <TextBlock Text="Mettre à jour vos informations personnelles" 
                                      Style="{StaticResource SettingDescriptionStyle}"/>
                        </StackPanel>

                        <Button Grid.Column="1" 
                               Content="MODIFIER"
                               Background="#AF66FF"
                               Foreground="White"
                               BorderThickness="0"
                               Height="40"
                               Width="120"
                               FontWeight="Bold"
                               Click="ModifierProfil_Click">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            CornerRadius="8">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#D393FF"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                        </Button>
                    </Grid>

                    <!-- Zone de danger -->
                    <Border Background="#330000"
                            CornerRadius="8"
                            Padding="20">
                        <StackPanel>
                            <TextBlock Text="⚠️ ZONE DE DANGER"
                                      Foreground="#FF6B6B"
                                      FontSize="16"
                                      FontWeight="Bold"
                                      Margin="0,0,0,15"/>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="SUPPRIMER LE COMPTE" 
                                              Foreground="#FF6B6B"
                                              FontSize="14"
                                              FontWeight="Bold"/>
                                    <TextBlock Text="Cette action est irréversible. Toutes vos données seront perdues." 
                                              Foreground="#FFAAAA"
                                              FontSize="12"
                                              Margin="0,5,0,0"/>
                                </StackPanel>

                                <Button Grid.Column="1" 
                                       Content="SUPPRIMER"
                                       Style="{StaticResource DangerButtonStyle}"
                                       Width="120"
                                       Click="DeleteAccount_Click"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>