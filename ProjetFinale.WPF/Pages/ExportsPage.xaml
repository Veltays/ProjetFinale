<Page x:Class="ProjetFinale.WPF.ExportsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="ExportsPage"
      Background="{DynamicResource App.Background}"
      Foreground="{DynamicResource App.Foreground}">

    <ScrollViewer Margin="20" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel>

            <!-- En-tête -->
            <StackPanel Style="{StaticResource ExportsHeaderStyle}">
                <TextBlock Text="EXPORTS" Style="{StaticResource ExportsMainTitleStyle}"/>
                <TextBlock Text="Exportez vos données dans différents formats" Style="{StaticResource ExportsSubtitleStyle}"/>
            </StackPanel>

            <!-- Carte d’aperçu -->
            <Border Style="{StaticResource ExportsStatsCardStyle}">
                <StackPanel>
                    <TextBlock Text="📊 APERÇU DES DONNÉES À EXPORTER" Style="{StaticResource ExportsStatsTitleStyle}"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="1*"/>
                            <ColumnDefinition Width="1*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Colonne 1 -->
                        <StackPanel Grid.Column="0">
                            <TextBlock Text="👤 UTILISATEUR" Style="{StaticResource ExportsStatsHeaderStyle}"/>
                            <TextBlock Text="{Binding Pseudo, StringFormat='Pseudo : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding AgeFormate, StringFormat='Âge : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding PoidsFormate, StringFormat='Poids : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding TailleFormatee, StringFormat='Taille : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                        </StackPanel>

                        <!-- Colonne 2 -->
                        <StackPanel Grid.Column="1">
                            <TextBlock Text="📈 DONNÉES" Style="{StaticResource ExportsStatsHeaderStyle}"/>
                            <TextBlock Text="{Binding ListeTaches.Count, StringFormat='Tâches : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding ListeActivites.Count, StringFormat='Activités : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding ListeAgenda.Count, StringFormat='Agenda : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding ListeStatistiques.Count, StringFormat='Stats : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                        </StackPanel>

                        <!-- Colonne 3 -->
                        <StackPanel Grid.Column="2">
                            <TextBlock Text="🎯 OBJECTIFS" Style="{StaticResource ExportsStatsHeaderStyle}"/>
                            <TextBlock Text="{Binding ObjectifPoidsFormate, StringFormat='Objectif : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding IMCFormate, StringFormat='IMC actuel : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding IMCObjectifFormate, StringFormat='IMC objectif : {0}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                            <TextBlock Text="{Binding DateObjectif, StringFormat='Échéance : {0:dd/MM/yyyy}'}" Style="{StaticResource ExportsStatsValueStyle}"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Formats disponibles -->
            <TextBlock Text="FORMATS D'EXPORT DISPONIBLES" Style="{StaticResource ExportsSectionTitleStyle}"/>

            <StackPanel Style="{StaticResource ExportsCardsContainerStyle}">

                <!-- CSV -->
                <Border Style="{StaticResource ExportsCardStyle}">
                    <StackPanel>
                        <Border Style="{StaticResource ExportsIconGreenStyle}">
                            <TextBlock Text="📊" Style="{StaticResource ExportsIconTextStyle}"/>
                        </Border>
                        <TextBlock Text="CSV (.csv)" Style="{StaticResource ExportsCardTitleStyle}"/>
                        <TextBlock Text="Format de données séparées par des virgules. Compatible avec Excel, Google Sheets..." 
                                   Style="{StaticResource ExportsCardDescriptionStyle}"/>
                        <TextBlock Text="TAILLE: ~850 KB" Style="{StaticResource ExportsCardSizeGreenStyle}"/>
                        <Button Content="EXPORTER EN CSV"
                                Style="{StaticResource ExportsButtonStyle}"
                                Click="ExportCSV_Click"/>
                    </StackPanel>
                </Border>

                <!-- JSON -->
                <Border Style="{StaticResource ExportsCardStyle}">
                    <StackPanel>
                        <Border Style="{StaticResource ExportsIconOrangeStyle}">
                            <TextBlock Text="📋" Style="{StaticResource ExportsIconTextStyle}"/>
                        </Border>
                        <TextBlock Text="JSON (.json)" Style="{StaticResource ExportsCardTitleStyle}"/>
                        <TextBlock Text="Format universel pour les devs ou intégrations externes."
                                   Style="{StaticResource ExportsCardDescriptionStyle}"/>
                        <TextBlock Text="TAILLE: ~1.8 MB" Style="{StaticResource ExportsCardSizeOrangeStyle}"/>
                        <Button Content="EXPORTER EN JSON"
                                Style="{StaticResource ExportsButtonStyle}"
                                Click="ExportJSON_Click"/>
                    </StackPanel>
                </Border>

                <!-- XML -->
                <Border Style="{StaticResource ExportsCardStyle}">
                    <StackPanel>
                        <Border Style="{StaticResource ExportsIconBlueStyle}">
                            <TextBlock Text="💾" Style="{StaticResource ExportsIconTextStyle}"/>
                        </Border>
                        <TextBlock Text="XML (.xml)" Style="{StaticResource ExportsCardTitleStyle}"/>
                        <TextBlock Text="Format structuré idéal pour sauvegarde/restauration." 
                                   Style="{StaticResource ExportsCardDescriptionStyle}"/>
                        <TextBlock Text="TAILLE: ~900 KB" Style="{StaticResource ExportsCardSizeBlueStyle}"/>
                        <Button Content="EXPORTER EN XML"
                                Style="{StaticResource ExportsButtonStyle}"
                                Click="ExportSerialize_Click"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- EXPORT COMPLET -->
            <TextBlock Text="EXPORT COMPLET" Style="{StaticResource ExportsSectionTitleStyle}"/>

            <Border Style="{StaticResource ExportsCompleteCardStyle}">
                <StackPanel>
                    <TextBlock Text="EXPORTER TOUT" Style="{StaticResource ExportsCompleteTitleStyle}"/>
                    <TextBlock Text="Téléchargez toutes vos données dans tous les formats disponibles"
                               Style="{StaticResource ExportsCompleteDescriptionStyle}"/>

                    <TextBlock Style="{StaticResource ExportsCompleteSummaryStyle}">
                        <TextBlock.Text>
                            <MultiBinding StringFormat="{}📊 {0} tâches • 🏃 {1} activités • 📅 {2} événements">
                                <Binding Path="ListeTaches.Count"/>
                                <Binding Path="ListeActivites.Count"/>
                                <Binding Path="ListeAgenda.Count"/>
                            </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>

                    <StackPanel Style="{StaticResource ExportsCompleteButtonsStyle}">
                        <Button Content="EXPORTER TOUT (.zip)"
                                Style="{StaticResource ExportsBigButtonStyle}"
                                Click="ExportAll_Click"/>

                    </StackPanel>
                </StackPanel>
            </Border>

        </StackPanel>
    </ScrollViewer>
</Page>
